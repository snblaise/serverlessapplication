c5f3dfe4202c45b96821e8f11f2df991
// Mock AWS SDK globally
_getJestObj().mock('aws-sdk', () => ({
  config: {
    update: jest.fn()
  },
  CloudWatch: jest.fn(() => ({
    putMetricData: jest.fn().mockReturnValue({
      promise: jest.fn().mockResolvedValue({})
    })
  })),
  XRay: jest.fn(() => ({
    captureAWS: jest.fn(),
    captureHTTPs: jest.fn()
  }))
}));

// Mock Lambda Powertools
_getJestObj().mock('@aws-lambda-powertools/logger', () => ({
  Logger: jest.fn().mockImplementation(() => ({
    info: jest.fn(),
    error: jest.fn(),
    warn: jest.fn(),
    debug: jest.fn(),
    addContext: jest.fn()
  }))
}));
_getJestObj().mock('@aws-lambda-powertools/metrics', () => ({
  Metrics: jest.fn().mockImplementation(() => ({
    addMetric: jest.fn(),
    publishStoredMetrics: jest.fn()
  })),
  MetricUnits: {
    Count: 'Count',
    Seconds: 'Seconds',
    Milliseconds: 'Milliseconds'
  }
}));
_getJestObj().mock('@aws-lambda-powertools/tracer', () => ({
  Tracer: jest.fn().mockImplementation(() => ({
    getSegment: jest.fn().mockReturnValue({
      addNewSubsegment: jest.fn().mockReturnValue({
        addAnnotation: jest.fn(),
        addMetadata: jest.fn(),
        close: jest.fn()
      })
    }),
    captureAWS: jest.fn(),
    captureHTTPs: jest.fn()
  }))
}));

// Global test utilities
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
// Jest setup file for global test configuration

// Set test environment variables
process.env.NODE_ENV = 'test';
process.env.LOG_LEVEL = 'ERROR'; // Reduce log noise during tests
process.env.AWS_REGION = 'us-east-1';
global.createMockLambdaContext = (overrides = {}) => ({
  awsRequestId: 'test-request-id',
  functionName: 'test-function',
  functionVersion: '1',
  invokedFunctionArn: 'arn:aws:lambda:us-east-1:123456789012:function:test-function',
  memoryLimitInMB: 128,
  getRemainingTimeInMillis: () => 30000,
  logGroupName: '/aws/lambda/test-function',
  logStreamName: '2023/01/01/[$LATEST]test',
  identity: undefined,
  clientContext: undefined,
  ...overrides
});

// Increase timeout for integration tests
jest.setTimeout(30000);

// Console override for cleaner test output
const originalConsole = console;
global.console = {
  ...originalConsole,
  // Suppress console.log during tests unless explicitly needed
  log: process.env.VERBOSE_TESTS ? originalConsole.log : jest.fn(),
  info: process.env.VERBOSE_TESTS ? originalConsole.info : jest.fn(),
  warn: originalConsole.warn,
  error: originalConsole.error
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJjb25maWciLCJ1cGRhdGUiLCJqZXN0IiwiZm4iLCJDbG91ZFdhdGNoIiwicHV0TWV0cmljRGF0YSIsIm1vY2tSZXR1cm5WYWx1ZSIsInByb21pc2UiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIlhSYXkiLCJjYXB0dXJlQVdTIiwiY2FwdHVyZUhUVFBzIiwiTG9nZ2VyIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiaW5mbyIsImVycm9yIiwid2FybiIsImRlYnVnIiwiYWRkQ29udGV4dCIsIk1ldHJpY3MiLCJhZGRNZXRyaWMiLCJwdWJsaXNoU3RvcmVkTWV0cmljcyIsIk1ldHJpY1VuaXRzIiwiQ291bnQiLCJTZWNvbmRzIiwiTWlsbGlzZWNvbmRzIiwiVHJhY2VyIiwiZ2V0U2VnbWVudCIsImFkZE5ld1N1YnNlZ21lbnQiLCJhZGRBbm5vdGF0aW9uIiwiYWRkTWV0YWRhdGEiLCJjbG9zZSIsInJlcXVpcmUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJMT0dfTEVWRUwiLCJBV1NfUkVHSU9OIiwiZ2xvYmFsIiwiY3JlYXRlTW9ja0xhbWJkYUNvbnRleHQiLCJvdmVycmlkZXMiLCJhd3NSZXF1ZXN0SWQiLCJmdW5jdGlvbk5hbWUiLCJmdW5jdGlvblZlcnNpb24iLCJpbnZva2VkRnVuY3Rpb25Bcm4iLCJtZW1vcnlMaW1pdEluTUIiLCJnZXRSZW1haW5pbmdUaW1lSW5NaWxsaXMiLCJsb2dHcm91cE5hbWUiLCJsb2dTdHJlYW1OYW1lIiwiaWRlbnRpdHkiLCJ1bmRlZmluZWQiLCJjbGllbnRDb250ZXh0Iiwic2V0VGltZW91dCIsIm9yaWdpbmFsQ29uc29sZSIsImNvbnNvbGUiLCJsb2ciLCJWRVJCT1NFX1RFU1RTIl0sInNvdXJjZXMiOlsiamVzdC5zZXR1cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBKZXN0IHNldHVwIGZpbGUgZm9yIGdsb2JhbCB0ZXN0IGNvbmZpZ3VyYXRpb25cblxuLy8gU2V0IHRlc3QgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5wcm9jZXNzLmVudi5OT0RFX0VOViA9ICd0ZXN0JztcbnByb2Nlc3MuZW52LkxPR19MRVZFTCA9ICdFUlJPUic7IC8vIFJlZHVjZSBsb2cgbm9pc2UgZHVyaW5nIHRlc3RzXG5wcm9jZXNzLmVudi5BV1NfUkVHSU9OID0gJ3VzLWVhc3QtMSc7XG5cbi8vIE1vY2sgQVdTIFNESyBnbG9iYWxseVxuamVzdC5tb2NrKCdhd3Mtc2RrJywgKCkgPT4gKHtcbiAgY29uZmlnOiB7XG4gICAgdXBkYXRlOiBqZXN0LmZuKClcbiAgfSxcbiAgQ2xvdWRXYXRjaDogamVzdC5mbigoKSA9PiAoe1xuICAgIHB1dE1ldHJpY0RhdGE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgcHJvbWlzZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KVxuICAgIH0pXG4gIH0pKSxcbiAgWFJheTogamVzdC5mbigoKSA9PiAoe1xuICAgIGNhcHR1cmVBV1M6IGplc3QuZm4oKSxcbiAgICBjYXB0dXJlSFRUUHM6IGplc3QuZm4oKVxuICB9KSlcbn0pKTtcblxuLy8gTW9jayBMYW1iZGEgUG93ZXJ0b29sc1xuamVzdC5tb2NrKCdAYXdzLWxhbWJkYS1wb3dlcnRvb2xzL2xvZ2dlcicsICgpID0+ICh7XG4gIExvZ2dlcjogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgIGluZm86IGplc3QuZm4oKSxcbiAgICBlcnJvcjogamVzdC5mbigpLFxuICAgIHdhcm46IGplc3QuZm4oKSxcbiAgICBkZWJ1ZzogamVzdC5mbigpLFxuICAgIGFkZENvbnRleHQ6IGplc3QuZm4oKVxuICB9KSlcbn0pKTtcblxuamVzdC5tb2NrKCdAYXdzLWxhbWJkYS1wb3dlcnRvb2xzL21ldHJpY3MnLCAoKSA9PiAoe1xuICBNZXRyaWNzOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgYWRkTWV0cmljOiBqZXN0LmZuKCksXG4gICAgcHVibGlzaFN0b3JlZE1ldHJpY3M6IGplc3QuZm4oKVxuICB9KSksXG4gIE1ldHJpY1VuaXRzOiB7XG4gICAgQ291bnQ6ICdDb3VudCcsXG4gICAgU2Vjb25kczogJ1NlY29uZHMnLFxuICAgIE1pbGxpc2Vjb25kczogJ01pbGxpc2Vjb25kcydcbiAgfVxufSkpO1xuXG5qZXN0Lm1vY2soJ0Bhd3MtbGFtYmRhLXBvd2VydG9vbHMvdHJhY2VyJywgKCkgPT4gKHtcbiAgVHJhY2VyOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgZ2V0U2VnbWVudDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBhZGROZXdTdWJzZWdtZW50OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgYWRkQW5ub3RhdGlvbjogamVzdC5mbigpLFxuICAgICAgICBhZGRNZXRhZGF0YTogamVzdC5mbigpLFxuICAgICAgICBjbG9zZTogamVzdC5mbigpXG4gICAgICB9KVxuICAgIH0pLFxuICAgIGNhcHR1cmVBV1M6IGplc3QuZm4oKSxcbiAgICBjYXB0dXJlSFRUUHM6IGplc3QuZm4oKVxuICB9KSlcbn0pKTtcblxuLy8gR2xvYmFsIHRlc3QgdXRpbGl0aWVzXG5nbG9iYWwuY3JlYXRlTW9ja0xhbWJkYUNvbnRleHQgPSAob3ZlcnJpZGVzID0ge30pID0+ICh7XG4gIGF3c1JlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC1pZCcsXG4gIGZ1bmN0aW9uTmFtZTogJ3Rlc3QtZnVuY3Rpb24nLFxuICBmdW5jdGlvblZlcnNpb246ICcxJyxcbiAgaW52b2tlZEZ1bmN0aW9uQXJuOiAnYXJuOmF3czpsYW1iZGE6dXMtZWFzdC0xOjEyMzQ1Njc4OTAxMjpmdW5jdGlvbjp0ZXN0LWZ1bmN0aW9uJyxcbiAgbWVtb3J5TGltaXRJbk1COiAxMjgsXG4gIGdldFJlbWFpbmluZ1RpbWVJbk1pbGxpczogKCkgPT4gMzAwMDAsXG4gIGxvZ0dyb3VwTmFtZTogJy9hd3MvbGFtYmRhL3Rlc3QtZnVuY3Rpb24nLFxuICBsb2dTdHJlYW1OYW1lOiAnMjAyMy8wMS8wMS9bJExBVEVTVF10ZXN0JyxcbiAgaWRlbnRpdHk6IHVuZGVmaW5lZCxcbiAgY2xpZW50Q29udGV4dDogdW5kZWZpbmVkLFxuICAuLi5vdmVycmlkZXNcbn0pO1xuXG4vLyBJbmNyZWFzZSB0aW1lb3V0IGZvciBpbnRlZ3JhdGlvbiB0ZXN0c1xuamVzdC5zZXRUaW1lb3V0KDMwMDAwKTtcblxuLy8gQ29uc29sZSBvdmVycmlkZSBmb3IgY2xlYW5lciB0ZXN0IG91dHB1dFxuY29uc3Qgb3JpZ2luYWxDb25zb2xlID0gY29uc29sZTtcbmdsb2JhbC5jb25zb2xlID0ge1xuICAuLi5vcmlnaW5hbENvbnNvbGUsXG4gIC8vIFN1cHByZXNzIGNvbnNvbGUubG9nIGR1cmluZyB0ZXN0cyB1bmxlc3MgZXhwbGljaXRseSBuZWVkZWRcbiAgbG9nOiBwcm9jZXNzLmVudi5WRVJCT1NFX1RFU1RTID8gb3JpZ2luYWxDb25zb2xlLmxvZyA6IGplc3QuZm4oKSxcbiAgaW5mbzogcHJvY2Vzcy5lbnYuVkVSQk9TRV9URVNUUyA/IG9yaWdpbmFsQ29uc29sZS5pbmZvIDogamVzdC5mbigpLFxuICB3YXJuOiBvcmlnaW5hbENvbnNvbGUud2FybixcbiAgZXJyb3I6IG9yaWdpbmFsQ29uc29sZS5lcnJvclxufTsiXSwibWFwcGluZ3MiOiJBQU9BO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPO0VBQzFCQyxNQUFNLEVBQUU7SUFDTkMsTUFBTSxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQztFQUNsQixDQUFDO0VBQ0RDLFVBQVUsRUFBRUYsSUFBSSxDQUFDQyxFQUFFLENBQUMsT0FBTztJQUN6QkUsYUFBYSxFQUFFSCxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNHLGVBQWUsQ0FBQztNQUN2Q0MsT0FBTyxFQUFFTCxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNLLGlCQUFpQixDQUFDLENBQUMsQ0FBQztJ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